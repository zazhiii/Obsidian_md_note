
在处理如何创建和使用 GridCoverage2D 实例的细节之前，必须充分理解 GridCoverage 信息内容的语义。

在最基本的层面上，GridCoverage 是一个数字值矩阵，包含有关数字值的含义和地理位置的信息。因此，对于每个 GridCoverage，会有一个数据结构（例如图像文件），其中包含所有相关的数字值。还会有一些数据结构，包含数据的含义和另一些数据结构，包含数据的地理参考信息。

 例如：

- 一个数字高程模型（DEM）文件
	考虑一个宽度为 1000 像素，高度为 600 像素的图像，每个像素包含一个浮动值。数据源将包括访问这个值矩阵的方式，但我们还需要更多的信息来理解这些值的含义。

#### **类别**

在地理空间科学中使用的图像具有高度结构化的值。例如，图像可能有一个值，例如 -9999，用来表示该位置的数据不可用。图像可能有另一个值，例如 -8888，用来表示云覆盖。然后，我们可能有实际的测量值，范围可能从 0 到 5000，但这些值实际上映射到 -99 到 400 之间的 5000 个级别，单位是用户感兴趣的测量单位，比如给定垂直基准之上的美国英尺。

在 GeoTools 中，我们将不同种类的值分配到不同的类别中。也就是说，我们为 -9999 值创建一个类别，为 -8888 值创建另一个类别，为从 0 到 5000 的值创建第三个类别。这些类别定义了我们如何使用这些值，它们将映射到什么，并在图像中呈现数据时提供默认的颜色。因此，我们有：

|数据|类别|值|颜色|
|---|---|---|---|
|-9999|QualitativeCategory|NaN|new Color(0,0,0,0)|
|-8888|QualitativeCategory|NaN|Color.WHITE|
|0:5000|QuantitativeCategory|-99:400 英尺|Color.BLUE:Color.GREEN|

如果文件中包含一个未在任何类别中定义的值，则如何处理该值的行为是未定义的。

#### **样本维度**  SampleDimensions

样本维度为结果 GridCoverage 的每个波段建立了映射关系。通常，我们将原始数据中的每个波段映射到 GridCoverage 中的一个 SampleDimension，因此原始数据中的波段数与结果 GridCoverage 中的波段数相同。在这个示例中，我们只有一个波段，因此只创建一个 SampleDimension。

“样本维度”将由三个类别对象构建，因此我们从文件中的数据值到某个数值建立了完整的映射关系。为了构建样本维度，我们将创建一个类别实例数组，并定义值 -99 到 400 的单位。

#### **地理参考** Georeferencing

为了构建 GeoTools GridCoverage，我们还需要有关数据矩阵中的坐标空间（行/列）与某个具有地理意义的坐标参考系统中的实际世界坐标空间之间映射的信息，可以是投影的也可以是非投影的。

快速构建此信息的方法是通过构建一个包含结果 GridCoverage 坐标参考系统（CoordinateReferenceSystem）和原始数据矩阵的下角和上角坐标（外部角，而不是像素中心）坐标的 Envelope 来完成。覆盖模块可以根据这个 Envelope 构建它将使用的 MathTransform。虽然这种策略提供了便利，但它不允许太多的灵活性：网格必须在结果 CRS 中完全对齐，原始数据矩阵和结果 CRS 中的轴必须顺序一致。

一种更复杂但完全强大的构建地理参考信息的方法是自行构建 MathTransform，它将数据矩阵的坐标空间映射到实际世界的地理参考空间。此方法允许进行旋转影像、轴顺序切换以及其他更复杂的转换。

#### **GridCoverage 视图**

通过原始数据矩阵、所有 SampleDimension 实例的数组和地理参考信息，我们可以创建 GridCoverage 实例。

在结果 GridCoverage 对象上，我们将能够获得数据值的不同“视图”。我们可以对原始的“本地”数据、给定单位中的转换“地球物理”数据或颜色值进行处理。

**示例：** RGB 文件